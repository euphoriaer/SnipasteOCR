<Window x:Class="SnipasteOCR.FloatingImageWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pinned Image"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        UseLayoutRounding="True"
        KeyDown="Window_KeyDown">

    <!-- 定义蓝色外发光效果（默认开启） -->
    <Window.Resources>
        <DropShadowEffect x:Key="GlowEffect"
                          Color="#409EFF"
                          ShadowDepth="0"
                          BlurRadius="5"
                          Opacity="0.9"/>
    </Window.Resources>

    <!-- 全局右键菜单 -->
    <Window.ContextMenu>
        <ContextMenu>
            <MenuItem Header="💾 保存图片" Click="SaveImage_Click"/>
            <MenuItem Header="📖 OCR 识别" Click="OcrRecognize_Click"/>
            <MenuItem Header="📋 复制到剪贴板" Click="CopyToClipboard_Click"/>
            <Separator/>
            <MenuItem Header="🔍 放大" InputGestureText="Plus" Click="ZoomIn_Click"/>
            <MenuItem Header="📉 缩小" InputGestureText="Minus" Click="ZoomOut_Click"/>
            <MenuItem Header="🔄 重置大小 (Ctrl+0)" InputGestureText="Ctrl+0" Click="ResetZoom_Click"/>
            <Separator/>
            <!-- 新增：显示边缘阴影 菜单项 -->
            <MenuItem x:Name="ToggleGlowMenuItem"
                      Header="🔵 显示边缘阴影"
                      IsCheckable="True"
                      IsChecked="True"
                      Click="ToggleGlow_Click"/>
            <Separator/>
            <MenuItem Header="❌ 关闭" InputGestureText="Esc" Click="CloseWindow_Click"/>
        </ContextMenu>
    </Window.ContextMenu>

    <Grid>
        <!-- 使用 Border 包裹 Image，用于应用阴影效果 -->
        <Border x:Name="GlowBorder"
        Background="Transparent"
        Padding="3"
        Effect="{StaticResource GlowEffect}">

            <Image x:Name="ImageControl"
           RenderOptions.BitmapScalingMode="NearestNeighbor"
           Stretch="None"
                SnapsToDevicePixels="True"
           ToolTip="右键菜单操作"/>

        </Border>

        <!-- 缩放百分比提示 -->
        <TextBlock x:Name="ZoomPercentageText"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="10"
                   FontSize="14"
                   Foreground="White"
                   Background="#CC000000"
                   Padding="5,2"
                   Opacity="0.9"
                   Visibility="Collapsed"/>
    </Grid>
</Window>